import{_ as r,r as F,o as p,c as i,a as s,b as l,d as o,w as e,e as c}from"./app.d641dd0e.js";const y={},d=s("h1",{id:"nestjs-\u5F00\u53D1",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#nestjs-\u5F00\u53D1","aria-hidden":"true"},"#"),l(" NestJS \u5F00\u53D1")],-1),E={href:"https://nestjs.com/",target:"_blank",rel:"noopener noreferrer"},u={href:"https://github.com/koishijs/koishi-nestjs",target:"_blank",rel:"noopener noreferrer"},h={class:"custom-container tip"},f=s("p",{class:"custom-container-title"},"TIP",-1),_={href:"https://docs.nestjs.cn/8/",target:"_blank",rel:"noopener noreferrer"},g=s("h2",{id:"\u5B89\u88C5",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u5B89\u88C5","aria-hidden":"true"},"#"),l(" \u5B89\u88C5")],-1),D=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"npm install koishi-nestjs koishi")])])],-1),A=s("h2",{id:"\u914D\u7F6E\u6A21\u5757",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u914D\u7F6E\u6A21\u5757","aria-hidden":"true"},"#"),l(" \u914D\u7F6E\u6A21\u5757")],-1),m=s("p",null,"koishi-nestjs \u4E2D\uFF0CKoishi \u4EE5 NestJS \u7684\u6A21\u5757\u7684\u5F62\u5F0F\u5F15\u5165\u5230\u9879\u76EE\u5DE5\u7A0B\u4E2D\u3002\u6211\u4EEC\u652F\u6301\u540C\u6B65\u548C\u5F02\u6B65\u4E24\u79CD\u914D\u7F6E\u65B9\u5F0F\u3002",-1),x={href:"https://docs.nestjs.cn/8/modules?id=%e5%85%a8%e5%b1%80%e6%a8%a1%e5%9d%97",target:"_blank",rel:"noopener noreferrer"},B=s("h3",{id:"\u540C\u6B65",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u540C\u6B65","aria-hidden":"true"},"#"),l(" \u540C\u6B65")],-1),k=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { Module } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@nestjs/common'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { KoishiModule, PluginDef } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi-nestjs'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," PluginOnebot "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@koishijs/plugin-onebot'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"Module"),s("span",{style:{color:"#F8F8F2"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  imports: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    KoishiModule."),s("span",{style:{color:"#A6E22E"}},"register"),s("span",{style:{color:"#F8F8F2"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      "),s("span",{style:{color:"#88846F"}},"// \u5728\u8FD9\u91CC\u586B\u5199 Koishi \u914D\u7F6E\u53C2\u6570")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      prefix: "),s("span",{style:{color:"#E6DB74"}},"'.'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      usePlugins: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        "),s("span",{style:{color:"#88846F"}},"// \u9884\u5B89\u88C5\u7684\u63D2\u4EF6")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        "),s("span",{style:{color:"#A6E22E"}},"PluginDef"),s("span",{style:{color:"#F8F8F2"}},"(PluginOnebot, {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      	  protocol: "),s("span",{style:{color:"#E6DB74"}},"'ws'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          endpoint: "),s("span",{style:{color:"#E6DB74"}},"'ws://localhost:6700'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          selfId: "),s("span",{style:{color:"#E6DB74"}},"'111514'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          token: "),s("span",{style:{color:"#E6DB74"}},"'koishi'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"AppModule"),s("span",{style:{color:"#F8F8F2"}}," {}")])])],-1),b=s("h3",{id:"\u5F02\u6B65",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u5F02\u6B65","aria-hidden":"true"},"#"),l(" \u5F02\u6B65")],-1),S=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { Module } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@nestjs/common'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { ConfigModule, ConfigService } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@nestjs/config'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { KoishiModule, PluginDef } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi-nestjs'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," PluginOnebot "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@koishijs/plugin-adapter-onebot'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"Module"),s("span",{style:{color:"#F8F8F2"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  imports: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    KoishiModule."),s("span",{style:{color:"#A6E22E"}},"registerAsync"),s("span",{style:{color:"#F8F8F2"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      imports: [ConfigModule."),s("span",{style:{color:"#A6E22E"}},"forRoot"),s("span",{style:{color:"#F8F8F2"}},"()],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      inject: [ConfigService],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      "),s("span",{style:{color:"#A6E22E"}},"useFactory"),s("span",{style:{color:"#F8F8F2"}},": "),s("span",{style:{color:"#F92672"}},"async"),s("span",{style:{color:"#F8F8F2"}}," ("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"config"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"ConfigService"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," ({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        "),s("span",{style:{color:"#88846F"}},"// \u5728\u8FD9\u91CC\u586B\u5199 Koishi \u914D\u7F6E\u53C2\u6570")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        prefix: "),s("span",{style:{color:"#E6DB74"}},"'.'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        usePlugins: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          "),s("span",{style:{color:"#88846F"}},"// \u9884\u5B89\u88C5\u7684\u63D2\u4EF6")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          "),s("span",{style:{color:"#A6E22E"}},"PluginDef"),s("span",{style:{color:"#F8F8F2"}},"(PluginOnebot, {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            protocol: "),s("span",{style:{color:"#E6DB74"}},"'ws'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            endpoint: config."),s("span",{style:{color:"#A6E22E"}},"get"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'CQ_ENDPOINT'"),s("span",{style:{color:"#F8F8F2"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            selfId: config."),s("span",{style:{color:"#A6E22E"}},"get"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'CQ_SELFID'"),s("span",{style:{color:"#F8F8F2"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            token: config."),s("span",{style:{color:"#A6E22E"}},"get"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'CQ_TOKEN'"),s("span",{style:{color:"#F8F8F2"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"AppModule"),s("span",{style:{color:"#F8F8F2"}}," {}")])])],-1),v=s("h3",{id:"\u914D\u7F6E\u9879",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u914D\u7F6E\u9879","aria-hidden":"true"},"#"),l(" \u914D\u7F6E\u9879")],-1),j=c("<li><strong>loggerPrefix:</strong> <code>string</code> Nest \u65E5\u5FD7\u4E2D Logger \u7684\u524D\u7F00\u3002\u9ED8\u8BA4 <code>koishi</code>\u3002</li><li><strong>loggerColor:</strong> <code>number</code> Nest \u65E5\u5FD7\u4E2D Logger \u7684\u989C\u8272\u652F\u6301\u3002\u9ED8\u8BA4 <code>0</code>\u3002</li>",2),C=s("strong",null,"usePlugins:",-1),N=s("code",null,"KoishiModulePlugin[]",-1),M=s("code",null,"PluginDef(plugin, options, select)",-1),K=s("li",null,[s("strong",null,"plugin:"),l(" Koishi \u63D2\u4EF6\u3002")],-1),P=s("li",null,[s("strong",null,"options:"),l(" Koishi \u63D2\u4EF6\u914D\u7F6E\u3002\u7B49\u540C\u4E8E "),s("code",null,"ctx.plugin(plugin, options)"),l("\u3002")],-1),I=s("strong",null,"select:",-1),w=s("strong",null,"moduleSelection:",-1),J=s("code",null,"KoishiModuleSelection[]",-1),W=s("li",null,[s("strong",null,"module:"),l(" Nest \u6A21\u5757\u7C7B\u3002")],-1),O=s("strong",null,"select:",-1),T=c('<li><strong>useWs:</strong> <code>boolean</code> \u662F\u5426\u542F\u7528 WebSocket \u7F51\u5173\u3002<strong>\u5F02\u6B65\u914D\u7F6E\u8BE5\u9879\u5E94\u5199\u5165\u5F02\u6B65\u914D\u7F6E\u9879\u4E2D</strong>\uFF0C\u800C\u4E0D\u662F\u5199\u5728 <code>useFactory</code> \u4E2D\u3002\u9ED8\u8BA4 <code>false</code>\u3002</li><li><strong>actionErrorMessage:</strong> <code>string</code> \u6307\u4EE4\u4E2D\u53D1\u751F\u672A\u77E5\u9519\u8BEF\u65F6\uFF0C\u673A\u5668\u4EBA\u8FD4\u56DE\u7684\u4FE1\u606F\u3002\u9ED8\u8BA4 <code>Internal Server Error</code>\u3002</li><li><strong>templateParams:</strong> \u5B9A\u4E49\u6CE8\u518C\u7684 <a href="#%E6%8F%92%E5%80%BC%E5%AE%9A%E4%B9%89">\u63D2\u503C\u4E0A\u4E0B\u6587\u5BF9\u8C61</a>\u3002</li>',3),U=s("h4",{id:"\u4E0D\u652F\u6301\u7684\u914D\u7F6E\u9879",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u4E0D\u652F\u6301\u7684\u914D\u7F6E\u9879","aria-hidden":"true"},"#"),l(" \u4E0D\u652F\u6301\u7684\u914D\u7F6E\u9879")],-1),L=s("p",null,"\u7531\u4E8E koishi-nestjs \u590D\u7528\u4E86 NestJS \u5B9E\u4F8B\u7684 HttpServer \u5BF9\u8C61\uFF0C\u56E0\u6B64\u4E0B\u5217\u5173\u4E8E HttpServer \u76D1\u542C\u7684\u9009\u9879\u5C06\u4E0D\u53D7\u652F\u6301\uFF1A",-1),H=s("ul",null,[s("li",null,[s("code",null,"port")]),s("li",null,[s("code",null,"host")])],-1),Q=s("h3",{id:"websocket-\u670D\u52A1\u5668",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#websocket-\u670D\u52A1\u5668","aria-hidden":"true"},"#"),l(" WebSocket \u670D\u52A1\u5668")],-1),V={href:"https://docs.nestjs.cn/8/websockets",target:"_blank",rel:"noopener noreferrer"},$=s("p",null,[l("\u4E3A\u4E86\u4E0E Koishi \u66F4\u597D\u5730\u9002\u914D NestJS \u7684 WebSocket \u529F\u80FD\uFF0Ckoishi-nestjs \u63D0\u4F9B\u4E86\u57FA\u4E8E @nestjs/platform-ws \u7684\u4E13\u7528 NestJS WebSocket \u9002\u914D\u5668\u3002\u6211\u4EEC\u9700\u8981\u5728 Koishi \u6A21\u5757\u914D\u7F6E\u4E2D\u8BBE\u7F6E "),s("code",null,"useWs"),l(" \u4E3A "),s("code",null,"true"),l("\uFF0C\u5E76\u52A0\u8F7D\u4E13\u7528 WebSocket \u9002\u914D\u5668\uFF1A")],-1),z=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// app.module.ts")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { Module } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@nestjs/common'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { ConfigModule, ConfigService } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@nestjs/config'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { KoishiModule, PluginDef } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi-nestjs'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," PluginOnebot "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@koishijs/plugin-adapter-onebot'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"Module"),s("span",{style:{color:"#F8F8F2"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  imports: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    KoishiModule."),s("span",{style:{color:"#A6E22E"}},"registerAsync"),s("span",{style:{color:"#F8F8F2"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      imports: [ConfigModule."),s("span",{style:{color:"#A6E22E"}},"forRoot"),s("span",{style:{color:"#F8F8F2"}},"()],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      inject: [ConfigService],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      useWs: "),s("span",{style:{color:"#AE81FF"}},"true"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      "),s("span",{style:{color:"#A6E22E"}},"useFactory"),s("span",{style:{color:"#F8F8F2"}},": "),s("span",{style:{color:"#F92672"}},"async"),s("span",{style:{color:"#F8F8F2"}}," ("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"config"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"ConfigService"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," ({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        "),s("span",{style:{color:"#88846F"}},"// \u5728\u8FD9\u91CC\u586B\u5199 Koishi \u914D\u7F6E\u53C2\u6570")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        prefix: "),s("span",{style:{color:"#E6DB74"}},"'.'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        usePlugins: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          "),s("span",{style:{color:"#88846F"}},"// \u9884\u5B89\u88C5\u7684\u63D2\u4EF6")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          "),s("span",{style:{color:"#A6E22E"}},"PluginDef"),s("span",{style:{color:"#F8F8F2"}},"(PluginOnebot, {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            protocol: "),s("span",{style:{color:"#E6DB74"}},"'ws'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            endpoint: config."),s("span",{style:{color:"#A6E22E"}},"get"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'CQ_ENDPOINT'"),s("span",{style:{color:"#F8F8F2"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            selfId: config."),s("span",{style:{color:"#A6E22E"}},"get"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'CQ_SELFID'"),s("span",{style:{color:"#F8F8F2"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"            token: config."),s("span",{style:{color:"#A6E22E"}},"get"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'CQ_TOKEN'"),s("span",{style:{color:"#F8F8F2"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  ]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"AppModule"),s("span",{style:{color:"#F8F8F2"}}," {}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// main.ts")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"const"),s("span",{style:{color:"#F8F8F2"}}," app "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"await"),s("span",{style:{color:"#F8F8F2"}}," NestFactory."),s("span",{style:{color:"#A6E22E"}},"create"),s("span",{style:{color:"#F8F8F2"}},"(AppModule)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"app."),s("span",{style:{color:"#A6E22E"}},"useWebSocketAdapter"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#F92672"}},"new"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"KoishiWsAdapter"),s("span",{style:{color:"#F8F8F2"}},"(app))")])])],-1),R=s("p",null,"\u8BE5\u9002\u914D\u5668\u62E5\u6709\u548C @nestjs/platform-ws \u9002\u914D\u5668\u57FA\u672C\u4E00\u81F4\u7684\u529F\u80FD\u3002\u5728 NestJS \u5DE5\u7A0B\u5185\u60A8\u53EF\u4EE5\u5982\u540C\u6B63\u5E38\u7684 WebSocket \u9002\u914D\u5668\u4E00\u822C\u4F7F\u7528\u5B83\u3002",-1),G=s("h2",{id:"\u6CE8\u5165-koishi-\u5B9E\u4F8B",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u6CE8\u5165-koishi-\u5B9E\u4F8B","aria-hidden":"true"},"#"),l(" \u6CE8\u5165 Koishi \u5B9E\u4F8B")],-1),X=s("p",null,"\u4F5C\u4E3A\u5F00\u53D1\u65B9\u5F0F\u7684\u4E00\u79CD\uFF0C\u60A8\u53EF\u4EE5\u5728 NestJS \u7684\u63A7\u5236\u5668\u6216\u63D0\u4F9B\u8005\u7C7B\u4E2D\u76F4\u63A5\u5BF9 Koishi \u5B9E\u4F8B\u6216\u4E0A\u4E0B\u6587\u8FDB\u884C\u6CE8\u5165\u64CD\u4F5C\u3002",-1),q=s("p",null,[l("\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5EFA\u8BAE\u8BA9 Nest \u63D0\u4F9B\u8005\u7C7B\u5B9E\u73B0 "),s("code",null,"OnModuleInit"),l(" \u63A5\u53E3\uFF0C\u5E76\u5728\u8BE5\u4E8B\u4EF6\u65B9\u6CD5\u4E2D\u8FDB\u884C Koishi \u6307\u4EE4\u6CE8\u518C\u64CD\u4F5C\u3002")],-1),Y=s("p",null,"koishi-nestjs \u5C06\u5728 NestJS \u5E94\u7528\u542F\u52A8\u65F6\u542F\u52A8 Koishi \u5B9E\u4F8B\u3002",-1),Z=s("h3",{id:"\u6CE8\u5165\u4E0A\u4E0B\u6587",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u6CE8\u5165\u4E0A\u4E0B\u6587","aria-hidden":"true"},"#"),l(" \u6CE8\u5165\u4E0A\u4E0B\u6587")],-1),ss=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"Injectable"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"AppService"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"implements"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","font-style":"italic","text-decoration":"underline"}},"OnModuleInit"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"constructor"),s("span",{style:{color:"#F8F8F2"}},"(@"),s("span",{style:{color:"#A6E22E"}},"InjectContext"),s("span",{style:{color:"#F8F8F2"}},"() "),s("span",{style:{color:"#F92672"}},"private"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"ctx"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Context"),s("span",{style:{color:"#F8F8F2"}},") {}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"onModuleInit"),s("span",{style:{color:"#F8F8F2"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#FD971F"}},"this"),s("span",{style:{color:"#F8F8F2"}},".ctx."),s("span",{style:{color:"#A6E22E"}},"on"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'message'"),s("span",{style:{color:"#F8F8F2"}},", ("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"session"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," {})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")])])],-1),ls=s("h3",{id:"\u6CE8\u5165\u67D0\u4E00\u7279\u5B9A\u4E0A\u4E0B\u6587",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u6CE8\u5165\u67D0\u4E00\u7279\u5B9A\u4E0A\u4E0B\u6587","aria-hidden":"true"},"#"),l(" \u6CE8\u5165\u67D0\u4E00\u7279\u5B9A\u4E0A\u4E0B\u6587")],-1),os=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"Injectable"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"AppService"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"implements"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","font-style":"italic","text-decoration":"underline"}},"OnModuleInit"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"constructor"),s("span",{style:{color:"#F8F8F2"}},"(@"),s("span",{style:{color:"#A6E22E"}},"InjectContextGuild"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'1111111111'"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#F92672"}},"private"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"ctx"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Context"),s("span",{style:{color:"#F8F8F2"}},") {}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"onModuleInit"),s("span",{style:{color:"#F8F8F2"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#FD971F"}},"this"),s("span",{style:{color:"#F8F8F2"}},".ctx."),s("span",{style:{color:"#A6E22E"}},"on"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'message'"),s("span",{style:{color:"#F8F8F2"}},", ("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"session"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," {})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")])])],-1),es=c('<h3 id="\u88C5\u9970\u5668\u5B9A\u4E49" tabindex="-1"><a class="header-anchor" href="#\u88C5\u9970\u5668\u5B9A\u4E49" aria-hidden="true">#</a> \u88C5\u9970\u5668\u5B9A\u4E49</h3><p>\u5728 Nest \u63D0\u4F9B\u8005\u6784\u9020\u51FD\u6570\u53C2\u6570\u5217\u8868\u4E2D\u4F7F\u7528\u4E0B\u5217\u88C5\u9970\u5668\u5373\u53EF\u8FDB\u884C\u6CE8\u5165\u64CD\u4F5C\u3002</p><ul><li><code>@InjectContext()</code> \u6CE8\u5165\u5168\u4F53\u4E0A\u4E0B\u6587\u3002\u7B49\u4EF7\u4E8E <code>ctx.any()</code></li><li><code>@InjectContextPrivate(...values[]: string)</code> \u6CE8\u5165\u79C1\u804A\u4E0A\u4E0B\u6587\u3002\u7B49\u4EF7\u4E8E <code>ctx.private(...values)</code></li><li><code>@InjectContextChannel(...values[]: string)</code> \u6CE8\u5165\u9891\u9053\u4E0A\u4E0B\u6587\u3002\u7B49\u4EF7\u4E8E <code>ctx.channel(...values)</code></li><li><code>@InjectContextGuild(...values[]: string)</code> \u6CE8\u5165\u7FA4\u7EC4\u4E0A\u4E0B\u6587\u3002\u7B49\u4EF7\u4E8E <code>ctx.guild(...values)</code></li><li><code>@InjectContextSelf(...values[]: string)</code> \u6CE8\u5165\u673A\u5668\u4EBA\u8D26\u6237\u4E0A\u4E0B\u6587\u3002\u7B49\u4EF7\u4E8E <code>ctx.self(...values)</code></li><li><code>@InjectContextUser(...values[]: string)</code> \u6CE8\u5165\u7528\u6237\u4E0A\u4E0B\u6587\u3002\u7B49\u4EF7\u4E8E <code>ctx.user(...values)</code></li><li><code>@InjectContextPlatform(...values[]: string)</code> \u6CE8\u5165\u5E73\u53F0\u4E0A\u4E0B\u6587\u3002\u7B49\u4EF7\u4E8E <code>ctx.platform(...values)</code></li></ul><h3 id="\u5728\u81EA\u5B9A\u4E49\u63D0\u4F9B\u8005\u6CE8\u5165-koishi-\u4E0A\u4E0B\u6587" tabindex="-1"><a class="header-anchor" href="#\u5728\u81EA\u5B9A\u4E49\u63D0\u4F9B\u8005\u6CE8\u5165-koishi-\u4E0A\u4E0B\u6587" aria-hidden="true">#</a> \u5728\u81EA\u5B9A\u4E49\u63D0\u4F9B\u8005\u6CE8\u5165 Koishi \u4E0A\u4E0B\u6587</h3><p>\u60A8\u5C06\u9700\u8981\u4F7F\u7528\u51FD\u6570 <code>getContextProvideToken()</code> \u8FDB\u884C\u6CE8\u5165\u64CD\u4F5C\uFF0C\u5982\u4E0B\u4F8B\u3002</p>',5),ns=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { Module } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@nestjs/common'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { KoishiModule, getContextProvideToken } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi-nestjs'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { AppService } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'./app.service'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { Context } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"Module"),s("span",{style:{color:"#F8F8F2"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  imports: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    KoishiModule."),s("span",{style:{color:"#A6E22E"}},"register"),s("span",{style:{color:"#F8F8F2"}},"({"),s("span",{style:{color:"#F92672"}},"..."),s("span",{style:{color:"#F8F8F2"}},"})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  providers: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      provide: AppService,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      inject: ["),s("span",{style:{color:"#A6E22E"}},"getContextProvideToken"),s("span",{style:{color:"#F8F8F2"}},"()],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      "),s("span",{style:{color:"#A6E22E"}},"useFactory"),s("span",{style:{color:"#F8F8F2"}},": ("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"ctx"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Context"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"new"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"AppService"),s("span",{style:{color:"#F8F8F2"}},"(ctx),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"AppModule"),s("span",{style:{color:"#F8F8F2"}}," {}")])])],-1),ts=s("h4",{id:"\u51FD\u6570\u5B9A\u4E49",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u51FD\u6570\u5B9A\u4E49","aria-hidden":"true"},"#"),l(" \u51FD\u6570\u5B9A\u4E49")],-1),as=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"function"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"getContextProvideToken"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"scopeType"),s("span",{style:{color:"#F92672"}},"?:"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"ContextScopeTypes"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"values"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"string"),s("span",{style:{color:"#F8F8F2"}},"[] "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," [])")])])],-1),cs=c('<ul><li><strong>scopeType:</strong> \u9009\u62E9\u5668\u7C7B\u578B\uFF0C\u53EF\u4EE5\u662F <code>private</code> <code>channel</code> <code>guild</code> <code>self</code> <code>user</code> <code>platform</code> \u4E4B\u4E00\u3002\u7559\u7A7A\u8868\u793A\u5168\u5C40\u4E0A\u4E0B\u6587\u3002</li><li><strong>values:</strong> \u9009\u62E9\u5668\u503C\u3002\u4F8B\u5982 <code>getContextProvideToken(&#39;platform&#39;, [&#39;onebot&#39;])</code> \u7B49\u4EF7\u4E8E <code>ctx.platform(&#39;onebot&#39;)</code>\u3002</li></ul><h2 id="\u5728\u63D0\u4F9B\u8005\u7C7B\u4E2D\u6CE8\u518C\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u5728\u63D0\u4F9B\u8005\u7C7B\u4E2D\u6CE8\u518C\u65B9\u6CD5" aria-hidden="true">#</a> \u5728\u63D0\u4F9B\u8005\u7C7B\u4E2D\u6CE8\u518C\u65B9\u6CD5</h2><p>\u60A8\u4E5F\u53EF\u4EE5\u5728\u63D0\u4F9B\u8005\u7C7B\u4E2D\uFF0C\u4F7F\u7528\u88C5\u9970\u5668\u8FDB\u884C Koishi \u7684\u4E2D\u95F4\u4EF6\uFF0C\u4E8B\u4EF6\uFF0C\u6307\u4EE4\u7B49\u65B9\u6CD5\u6CE8\u518C\uFF0C\u4E5F\u53EF\u4EE5\u52A0\u8F7D\u63D2\u4EF6\u3002</p>',3),Fs=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"Injectable"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"AppService"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u6CE8\u518C\u4E2D\u95F4\u4EF6")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  @"),s("span",{style:{color:"#A6E22E"}},"UseMiddleware"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"simpleMiddleware"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"session"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Session"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"next"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"NextFunction"),s("span",{style:{color:"#F8F8F2"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#F92672"}},"if"),s("span",{style:{color:"#F8F8F2"}}," (session.content "),s("span",{style:{color:"#F92672"}},"==="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'pang'"),s("span",{style:{color:"#F8F8F2"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      "),s("span",{style:{color:"#F92672"}},"return"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'peng'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#F92672"}},"return"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"next"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u6CE8\u518C\u4E8B\u4EF6\u76D1\u542C\u5668")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  @"),s("span",{style:{color:"#A6E22E"}},"UseEvent"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'message'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"async"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"onMessage"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"session"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Session"),s("span",{style:{color:"#F8F8F2"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#F92672"}},"if"),s("span",{style:{color:"#F8F8F2"}}," (session.content "),s("span",{style:{color:"#F92672"}},"==="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'ping'"),s("span",{style:{color:"#F8F8F2"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      "),s("span",{style:{color:"#F92672"}},"await"),s("span",{style:{color:"#F8F8F2"}}," session."),s("span",{style:{color:"#A6E22E"}},"send"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'pong'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u6CE8\u518C\u6307\u4EE4")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  @"),s("span",{style:{color:"#A6E22E"}},"UseCommand"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'dress'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E6DB74"}},"'\u7A7F\u88D9\u5B50'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  @"),s("span",{style:{color:"#A6E22E"}},"CommandUsage"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'\u4ECA\u5929\u7A7F\u88D9\u5B50\u4E86\u5417\uFF1F'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"onDressCommand"),s("span",{style:{color:"#F8F8F2"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    @"),s("span",{style:{color:"#A6E22E"}},"PutOption"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'color'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E6DB74"}},"'-c <color:string>  \u88D9\u5B50\u7684\u989C\u8272'"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"color"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"string"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    @"),s("span",{style:{color:"#A6E22E"}},"PutUserName"),s("span",{style:{color:"#F8F8F2"}},"() "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"name"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"string"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  ) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#F92672"}},"return"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"`"),s("span",{style:{color:"#F92672"}},"${"),s("span",{style:{color:"#F8F8F2"}},"name"),s("span",{style:{color:"#F92672"}},"}"),s("span",{style:{color:"#E6DB74"}}," \u4ECA\u5929\u7A7F\u7684\u88D9\u5B50\u7684\u989C\u8272\u662F "),s("span",{style:{color:"#F92672"}},"${"),s("span",{style:{color:"#F8F8F2"}},"color"),s("span",{style:{color:"#F92672"}},"}"),s("span",{style:{color:"#E6DB74"}},"\u3002`")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")])])],-1),rs=c('<ul><li><code>@Get</code> \u7B49 HTTP \u8DEF\u7531\u6CE8\u518C\u65B9\u6CD5\u3002\u8BF7\u4F7F\u7528 NestJS \u7684\u63A7\u5236\u5668\u3002</li><li><code>@Ws</code> \u8BF7\u4F7F\u7528 NestJS \u7684 WebSocket \u7F51\u5173\u3002</li></ul><h3 id="\u9519\u8BEF\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#\u9519\u8BEF\u5904\u7406" aria-hidden="true">#</a> \u9519\u8BEF\u5904\u7406</h3><p>\u5728 koishi-nestjs \u7684\u6307\u4EE4\u5904\u7406\u4E2D\uFF0C\u82E5\u629B\u51FA NestJS \u4E2D\u7684 <code>HttpException</code> \u6216 <code>WsException</code> \u7684\u5F02\u5E38\u65F6\uFF0C\u7CFB\u7EDF\u5C06\u4F1A\u4EE5\u5176\u4E2D\u7684\u8FD4\u56DE\u4FE1\u606F\u4F5C\u4E3A\u673A\u5668\u4EBA\u53D1\u9001\u7ED9\u7528\u6237\u7684\u9519\u8BEF\u4FE1\u606F\u3002</p><p>\u82E5\u9047\u5230\u672A\u77E5\u7684\u9519\u8BEF\uFF0C\u673A\u5668\u4EBA\u5219\u4F1A\u8FD4\u56DE\u7ED9\u7528\u6237 <code>Internal Server Error</code> \u4FE1\u606F\u3002\u8981\u6539\u53D8\u8FD9\u4E00\u9519\u8BEF\u4FE1\u606F\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>actionErrorMessage</code> \u914D\u7F6E\u9009\u9879\u3002\u8BBE\u7F6E\u6210\u7A7A\u5B57\u7B26\u4E32\u53EF\u4EE5\u5B8C\u5168\u7981\u7528\u8FD9\u4E00\u884C\u4E3A\u3002</p>',4),ps=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"Injectable"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"AppService"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  @"),s("span",{style:{color:"#A6E22E"}},"UseCommand"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'dress'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E6DB74"}},"'\u7A7F\u88D9\u5B50'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  @"),s("span",{style:{color:"#A6E22E"}},"CommandUsage"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'\u4ECA\u5929\u7A7F\u88D9\u5B50\u4E86\u5417\uFF1F'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"onDressCommand"),s("span",{style:{color:"#F8F8F2"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    @"),s("span",{style:{color:"#A6E22E"}},"PutOption"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'color'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E6DB74"}},"'-c <color:string>  \u88D9\u5B50\u7684\u989C\u8272'"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"color"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"string"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    @"),s("span",{style:{color:"#A6E22E"}},"PutUserName"),s("span",{style:{color:"#F8F8F2"}},"() "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"name"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"string"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  ) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#F92672"}},"throw"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"new"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"NotFoundException"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"`"),s("span",{style:{color:"#F92672"}},"${"),s("span",{style:{color:"#F8F8F2"}},"name"),s("span",{style:{color:"#F92672"}},"}"),s("span",{style:{color:"#E6DB74"}}," \u4ECA\u5929\u6CA1\u6709\u7A7F\u88D9\u5B50\uFF01`"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")])])],-1),is=s("h2",{id:"\u9009\u62E9\u5668",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u9009\u62E9\u5668","aria-hidden":"true"},"#"),l(" \u9009\u62E9\u5668")],-1),ys=s("p",null,"\u5177\u6709\u9009\u62E9\u5668\u5B9A\u4E49\u7684 NestJS \u63D0\u4F9B\u8005\u7C7B\u6CE8\u5165\u7684 Koishi \u4E0A\u4E0B\u6587\u5BF9\u8C61\uFF0C\u4E5F\u4F1A\u53D7\u5230\u8FD9\u4E9B\u9009\u62E9\u5668\u5B9A\u4E49\u7684\u5F71\u54CD\u3002",-1),ds=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"OnPlatform"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'onebot'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"Injectable"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"AppService"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"implements"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","font-style":"italic","text-decoration":"underline"}},"OnModuleInit"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"constructor"),s("span",{style:{color:"#F8F8F2"}},"(@"),s("span",{style:{color:"#A6E22E"}},"InjectContext"),s("span",{style:{color:"#F8F8F2"}},"() "),s("span",{style:{color:"#F92672"}},"private"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"ctx"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Context"),s("span",{style:{color:"#F8F8F2"}},") {}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"onModuleInit"),s("span",{style:{color:"#F8F8F2"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#88846F"}},"// \u53EA\u5BF9 OneBot \u5E73\u53F0\u751F\u6548")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#FD971F"}},"this"),s("span",{style:{color:"#F8F8F2"}},".ctx."),s("span",{style:{color:"#A6E22E"}},"on"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'message'"),s("span",{style:{color:"#F8F8F2"}},", ("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"session"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," {})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")])])],-1),Es=s("h2",{id:"\u63D2\u503C\u5B9A\u4E49",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u63D2\u503C\u5B9A\u4E49","aria-hidden":"true"},"#"),l(" \u63D2\u503C\u5B9A\u4E49")],-1),us=s("p",null,"koishi-nestjs \u7684\u9009\u62E9\u5668\u548C\u6307\u4EE4\u65B9\u6CD5\u6CE8\u518C\u88C5\u9970\u5668\u5747\u652F\u6301\u63D2\u503C\uFF0C\u63D2\u503C\u4E0A\u4E0B\u6587\u7531\u914D\u7F6E\u7684 templateParams \u5C5E\u6027\u63D0\u4F9B\u3002",-1),hs=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// app.service.ts")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"Injectable"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"AppService"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  @"),s("span",{style:{color:"#A6E22E"}},"UseCommand"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'{{dress.commandName}}'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"onDressCommand"),s("span",{style:{color:"#F8F8F2"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    @"),s("span",{style:{color:"#A6E22E"}},"PutValue"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'{{dress.color}}'"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"color"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"string"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    @"),s("span",{style:{color:"#A6E22E"}},"PutValue"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'{{dress.size}}'"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"size"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"string"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  ) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#F92672"}},"return"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"`\u60A8\u7A7F\u7684\u88D9\u5B50\u662F "),s("span",{style:{color:"#F92672"}},"${"),s("span",{style:{color:"#F8F8F2"}},"color"),s("span",{style:{color:"#F92672"}},"}"),s("span",{style:{color:"#E6DB74"}}," \u8272\u7684\uFF0C\u5927\u5C0F\u662F "),s("span",{style:{color:"#F92672"}},"${"),s("span",{style:{color:"#F8F8F2"}},"size"),s("span",{style:{color:"#F92672"}},"}"),s("span",{style:{color:"#E6DB74"}},"\u3002`")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// app.module.ts")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"Module"),s("span",{style:{color:"#F8F8F2"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  imports: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    KoishiModule."),s("span",{style:{color:"#A6E22E"}},"register"),s("span",{style:{color:"#F8F8F2"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      templateParams: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        dress: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          commandName: "),s("span",{style:{color:"#E6DB74"}},"'dress'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          color: "),s("span",{style:{color:"#E6DB74"}},"'\u7EA2\u8272'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          size: "),s("span",{style:{color:"#E6DB74"}},"'XL'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  providers: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    AppService,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"AppModule"),s("span",{style:{color:"#F8F8F2"}}," {}")])])],-1),fs=s("h2",{id:"\u4F7F\u7528\u670D\u52A1",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u4F7F\u7528\u670D\u52A1","aria-hidden":"true"},"#"),l(" \u4F7F\u7528\u670D\u52A1")],-1),_s=s("p",null,[l("\u60A8\u4E5F\u53EF\u4EE5\u5728 NestJS \u7684\u63D0\u4F9B\u8005\u7C7B\u4E2D\uFF0C\u4F7F\u7528 "),s("code",null,"@WireContextService()"),l(" \u88C5\u9970\u5668\u5728 NestJS \u63D0\u4F9B\u8005\u7C7B\u4E2D\u6CE8\u5165 Koishi \u7684\u670D\u52A1\u5BF9\u8C61\u3002")],-1),gs=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"@"),s("span",{style:{color:"#A6E22E"}},"Injectable"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"AppService"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"implements"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","font-style":"italic","text-decoration":"underline"}},"OnApplicationBootstrap"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u6CE8\u5165\u670D\u52A1\u5BF9\u8C61")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  @"),s("span",{style:{color:"#A6E22E"}},"WireContextService"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'cache'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"private"),s("span",{style:{color:"#F8F8F2"}}," database"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"DatabaseService")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u6210\u5458\u53D8\u91CF\u540D\u4E0E\u670D\u52A1\u540D\u79F0\u4E00\u81F4\u65F6 name \u53EF\u7701\u7565\u3002")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  @"),s("span",{style:{color:"#A6E22E"}},"WireContextService"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"private"),s("span",{style:{color:"#F8F8F2"}}," database2"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"DatabaseService")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"async"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"onApplicationBootstrap"),s("span",{style:{color:"#F8F8F2"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#88846F"}},"// onApplicationBootstrap \u94A9\u5B50\u65B9\u6CD5\u4E2D\uFF0C\u63D2\u4EF6\u5DF2\u7ECF\u52A0\u8F7D\u5B8C\u6BD5\uFF0C\u56E0\u6B64\u5728\u8FD9\u91CC\u53EF\u4EE5\u786E\u4FDD\u80FD\u8BBF\u95EE\u670D\u52A1\u5BF9\u8C61")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"const"),s("span",{style:{color:"#F8F8F2"}}," user "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"await"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FD971F"}},"this"),s("span",{style:{color:"#F8F8F2"}},".database."),s("span",{style:{color:"#A6E22E"}},"getUser"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'114514'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")])])],-1);function Ds(As,ms){const a=F("ExternalLinkIcon"),t=F("RouterLink"),n=F("panel-view");return p(),i("div",null,[d,s("p",null,[s("a",E,[l("NestJS"),o(a)]),l(" \u662F\u4E00\u4E2A IoC \u5F62\u5F0F\u7684 Node.js Web \u5E94\u7528\u6846\u67B6\u3002")]),s("p",null,[s("a",u,[l("koishi-nestjs"),o(a)]),l(" \u5141\u8BB8\u60A8\u5728 NestJS \u4E2D\uFF0C\u628A Koishi \u5F53\u4F5C\u4E00\u4E2A\u6A21\u5757\u6765\u5F15\u5165\u5DE5\u7A0B\uFF0C\u5E76\u4E0E NestJS \u4E2D\u7684\u5176\u4ED6\u6A21\u5757\u8FDB\u884C\u4EA4\u4E92\uFF0C\u4EE5\u6253\u9020\u89C4\u6A21\u5316\u7684\u673A\u5668\u4EBA\u5E94\u7528\uFF0C\u6216\u5728\u60A8\u7684\u4E1A\u52A1\u903B\u8F91\u4E2D\u52A0\u5165\u673A\u5668\u4EBA\u529F\u80FD\u3002")]),s("div",h,[f,s("p",null,[l("\u672C\u90E8\u5206\u6587\u6863\u5047\u5B9A\u60A8\u5DF2\u7ECF\u5177\u5907 Koishi \u548C NestJS \u76F8\u5173\u57FA\u7840\u3002\u8BF7\u53C2\u7167 "),o(t,{to:"/guide/"},{default:e(()=>[l("Koishi")]),_:1}),l(" \u4EE5\u53CA "),s("a",_,[l("NestJS"),o(a)]),l(" \u7684\u76F8\u5173\u6587\u6863\uFF0C\u4E86\u89E3\u76F8\u5173\u77E5\u8BC6\u3002")])]),g,o(n,{class:"code",title:"",style:{}},{default:e(()=>[D]),_:1}),A,m,s("p",null,[l("\u53E6\u5916\uFF0CKoishiModule \u4F1A\u88AB\u6CE8\u518C\u4E3A "),s("a",x,[l("\u5168\u5C40\u6A21\u5757"),o(a)]),l("\u3002\u5728\u9879\u76EE\u7684\u4EFB\u4F55\u6A21\u5757\u4E2D\u6CE8\u518C KoishiModule \u540E\uFF0C\u5728\u9879\u76EE\u7684\u4EFB\u4F55\u4F4D\u7F6E\u5747\u80FD\u4F7F\u7528 Koishi \u7684\u529F\u80FD\u3002")]),B,o(n,{class:"code",title:"",style:{}},{default:e(()=>[k]),_:1}),b,o(n,{class:"code",title:"",style:{}},{default:e(()=>[S]),_:1}),v,s("p",null,[l("koishi-nestjs \u7684\u914D\u7F6E\u9879\u548C "),o(t,{to:"/api/core/app.html"},{default:e(()=>[l("Koishi \u914D\u7F6E\u9879")]),_:1}),l(" \u57FA\u672C\u4E00\u81F4\uFF0C\u4E0B\u9762\u662F koishi-nestjs \u7279\u6709\u7684\u914D\u7F6E\u9879\uFF1A")]),s("ul",null,[j,s("li",null,[C,l(),N,l(" \u53EF\u9009\u3002\u9884\u5148\u5B89\u88C5\u7684 Koishi \u63D2\u4EF6\u5217\u8868\u3002\u4F7F\u7528 "),M,l(" \u65B9\u6CD5\u751F\u6210\u8BE5\u9879\u7684\u5B9A\u4E49\u3002\u8BE5\u914D\u7F6E\u9879\u7684\u6210\u5458\u53C2\u6570\u5982\u4E0B\u3002 "),s("ul",null,[K,P,s("li",null,[I,l(" \u53EF\u9009\uFF0CSelection \u5BF9\u8C61\uFF0C\u6307\u5B9A\u63D2\u4EF6\u7684 "),o(t,{to:"/guide/plugin/context.html#%E9%85%8D%E7%BD%AE%E6%8F%92%E4%BB%B6%E4%B8%8A%E4%B8%8B%E6%96%87"},{default:e(()=>[l("\u4E0A\u4E0B\u6587\u9009\u62E9\u5668")]),_:1}),l("\u3002")])])]),s("li",null,[w,l(),J,l(" \u53EF\u9009\u3002\u6307\u5B9A Nest \u5B9E\u4F8B\u52A0\u8F7D\u7684\u5176\u4ED6 Nest \u6A21\u5757\u6CE8\u5165\u7684 Koishi \u4E0A\u4E0B\u6587\u9009\u62E9\u5668\uFF0C\u53C2\u6570\u5982\u4E0B\uFF1A "),s("ul",null,[W,s("li",null,[O,l(" Selection \u5BF9\u8C61\uFF0C\u6307\u5B9A\u63D2\u4EF6\u7684 "),o(t,{to:"/guide/plugin/context.html#%E9%85%8D%E7%BD%AE%E6%8F%92%E4%BB%B6%E4%B8%8A%E4%B8%8B%E6%96%87"},{default:e(()=>[l("\u4E0A\u4E0B\u6587\u9009\u62E9\u5668")]),_:1}),l("\u3002")])])]),T]),U,L,H,Q,s("p",null,[l("\u548C\u76F4\u63A5\u8FD0\u884C Koishi \u4E0D\u540C\uFF0CNest.js \u4E2D\u7684 Koishi \u6A21\u5757\u5E76\u4E0D\u4F1A\u76F4\u63A5\u6CE8\u518C HttpServer\uFF0C\u800C\u662F\u5C06 HttpServer \u4E0E NestJS \u4E2D\u7684 HttpServer \u8FDB\u884C\u7ED1\u5B9A\u3002\u800C WebSocket \u4F7F\u7528\u7684\u4E5F\u662F NestJS \u4E2D\u7684 "),s("a",V,[l("WebSocket \u7F51\u5173"),o(a)]),l("\u3002\u56E0\u6B64\u82E5\u8981\u4F7F\u7528\u5230\u5982 "),o(t,{to:"/plugins/console/"},{default:e(()=>[l("console")]),_:1}),l(" \u6216 "),o(t,{to:"/plugins/adapter/onebot.html#%E5%8F%8D%E5%90%91-websocket"},{default:e(()=>[l("adapter-onebot")]),_:1}),l(" \u7684\u53CD\u5411 WebSocket \u529F\u80FD\u7684\u63D2\u4EF6\uFF0C\u9700\u8981\u5728 NestJS \u5B9E\u4F8B\u6CE8\u518C\u65F6\u8FDB\u884C\u4E00\u4E9B\u989D\u5916\u7684\u914D\u7F6E\u3002")]),$,o(n,{class:"code",title:"",style:{}},{default:e(()=>[z]),_:1}),R,G,X,q,Y,Z,o(n,{class:"code",title:"",style:{}},{default:e(()=>[ss]),_:1}),ls,o(n,{class:"code",title:"",style:{}},{default:e(()=>[os]),_:1}),es,o(n,{class:"code",title:"",style:{}},{default:e(()=>[ns]),_:1}),ts,o(n,{class:"code",title:"",style:{}},{default:e(()=>[as]),_:1}),cs,o(n,{class:"code",title:"",style:{}},{default:e(()=>[Fs]),_:1}),s("p",null,[l("\u88C5\u9970\u5668\u5B9A\u4E49\u4E0E "),o(t,{to:"/community/decorator/thirdeye.html#%E6%B3%A8%E5%86%8C%E4%BA%8B%E4%BB%B6"},{default:e(()=>[l("koishi-thirdeye")]),_:1}),l(" \u4E2D\u4E00\u81F4\u3002\u4F46\u662F\u4E0B\u5217\u5B58\u5728\u4E8E koishi-thirdeye \u7684\u529F\u80FD\u7531\u4E8E NestJS \u5DF2\u7ECF\u63D0\u4F9B\uFF0C\u56E0\u6B64\u5728 koishi-nestjs \u4E2D\u4E0D\u53D7\u652F\u6301\u3002")]),rs,o(n,{class:"code",title:"",style:{}},{default:e(()=>[ps]),_:1}),is,s("p",null,[l("\u9009\u62E9\u5668\u88C5\u9970\u5668\u53EF\u4EE5\u6CE8\u518C\u5728\u63D0\u4F9B\u8005\u7C7B\u9876\u90E8\uFF0C\u4E5F\u53EF\u4EE5\u6CE8\u518C\u5728\u63D0\u4F9B\u8005\u65B9\u6CD5\u51FD\u6570\u3002\u5B9A\u4E49\u4E0E "),o(t,{to:"/community/decorator/thirdeye.html#%E9%80%89%E6%8B%A9%E5%99%A8"},{default:e(()=>[l("koishi-thirdeye")]),_:1}),l(" \u76F8\u540C\u3002")]),ys,o(n,{class:"code",title:"",style:{}},{default:e(()=>[ds]),_:1}),Es,s("p",null,[l("\u4E0E "),o(t,{to:"/community/decorator/thirdeye.html#%E6%8F%92%E5%80%BC%E5%AE%9A%E4%B9%89"},{default:e(()=>[l("koishi-thirdeye")]),_:1}),l(" \u7C7B\u4F3C\uFF0Ckoishi-nestjs \u4E5F\u63D0\u4F9B\u4E86\u63D2\u503C\u5B9A\u4E49\u7684\u529F\u80FD\uFF0C\u4EE5\u7075\u6D3B\u7ED9\u5730\u4E3A\u3002")]),us,o(n,{class:"code",title:"",style:{}},{default:e(()=>[hs]),_:1}),fs,_s,o(n,{class:"code",title:"",style:{}},{default:e(()=>[gs]),_:1})])}const Bs=r(y,[["render",Ds],["__file","nestjs.html.vue"]]);export{Bs as default};
