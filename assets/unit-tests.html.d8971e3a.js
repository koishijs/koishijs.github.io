import{_ as t,r as F,o as c,c as p,a as s,b as l,d as o,w as n,e as r}from"./app.d641dd0e.js";const y={},i=r('<h1 id="\u5355\u5143\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u5355\u5143\u6D4B\u8BD5" aria-hidden="true">#</a> \u5355\u5143\u6D4B\u8BD5</h1><p>\u5982\u679C\u4F60\u662F\u4E00\u4F4D\u63D2\u4EF6\u5F00\u53D1\u8005\uFF0C\u6BD4\u8D77\u8BA9\u673A\u5668\u4EBA\u771F\u6B63\u8FD0\u884C\u8D77\u6765\uFF0C\u4F60\u6216\u8BB8\u4F1A\u66F4\u5E0C\u671B\u4F7F\u7528<strong>\u5355\u5143\u6D4B\u8BD5</strong>\uFF0C\u56E0\u4E3A\u5B83\u5177\u6709\u8BB8\u591A\u524D\u8005\u6240\u4E0D\u5177\u6709\u7684\u4F18\u70B9\uFF1A</p><ul><li>\u53EF\u4EE5\u5728\u65E0\u7F51\u7EDC\u7684\u60C5\u51B5\u4E0B\u8FD0\u884C</li><li>\u53EF\u4EE5\u6A21\u62DF\u51FA\u591A\u7528\u6237\u4EA4\u4E92\u7B49\u590D\u6742\u60C5\u51B5</li><li>\u53EF\u4EE5\u5728\u5185\u5B58\u4E2D\u6A21\u62DF\u4F60\u60F3\u8981\u7684\u6570\u636E\u5E93</li><li>\u80FD\u591F\u6709\u6548\u907F\u514D\u98CE\u63A7\u5E26\u6765\u7684\u635F\u5931</li><li>\u4FBF\u4E8E\u8C03\u8BD5\u4E0E\u9519\u8BEF\u5B9A\u4F4D</li></ul><p>\u672C\u7AE0\u5C06\u4ECB\u7ECD\u5B98\u65B9\u63D2\u4EF6 <code>@koishijs/plugin-mock</code>\u3002\u4F60\u53EF\u4EE5\u7528\u5B83\u6765\u5FEB\u901F\u68C0\u9A8C\u4F60\u7F16\u5199\u7684 Koishi \u63D2\u4EF6\u3002</p>',4),d={class:"custom-container tip"},h=s("p",{class:"custom-container-title"},"TIP",-1),E={href:"https://mochajs.org/",target:"_blank",rel:"noopener noreferrer"},u={href:"https://www.chaijs.com/",target:"_blank",rel:"noopener noreferrer"},_={href:"https://jestjs.io/",target:"_blank",rel:"noopener noreferrer"},m=s("h2",{id:"\u51C6\u5907\u5DE5\u4F5C",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u51C6\u5907\u5DE5\u4F5C","aria-hidden":"true"},"#"),l(" \u51C6\u5907\u5DE5\u4F5C")],-1),f=s("p",null,"\u5B89\u88C5\u6240\u9700\u7684\u6D4B\u8BD5\u5DE5\u5177\u4EE5\u53CA @koishijs/plugin-mock\uFF1A",-1),k=s("pre",{class:"shiki",style:{"background-color":"#032f62"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFFF00"}},"npm"),s("span",{style:{color:"#FFFFFF"}}," i mocha chai "),s("span",{style:{color:"#99FFFF"}},"@"),s("span",{style:{color:"#FFFFFF"}},"koishijs/plugin-mock -D")])])],-1),D=s("pre",{class:"shiki",style:{"background-color":"#032f62"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFFF00"}},"yarn"),s("span",{style:{color:"#FFFFFF"}}," add mocha chai "),s("span",{style:{color:"#99FFFF"}},"@"),s("span",{style:{color:"#FFFFFF"}},"koishijs/plugin-mock -D")])])],-1),A=s("p",null,[l("\u63A5\u7740\u521B\u5EFA\u5B58\u653E\u6D4B\u8BD5\u6587\u4EF6\u7684 "),s("code",null,"tests"),l(" \u76EE\u5F55\uFF0C\u5E76\u5728\u5176\u4E2D\u65B0\u5EFA\u4E00\u4E2A "),s("code",null,"index.spec.js"),l(" \u6587\u4EF6\uFF0C\u5F00\u59CB\u7F16\u5199\u4F60\u7684\u5355\u5143\u6D4B\u8BD5\uFF1A")],-1),g=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { App } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," mock "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@koishijs/plugin-mock'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"const"),s("span",{style:{color:"#F8F8F2"}}," app "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"new"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"App"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"app."),s("span",{style:{color:"#A6E22E"}},"plugin"),s("span",{style:{color:"#F8F8F2"}},"(mock)")])])],-1),B=s("h3",{id:"\u4F7F\u7528-typescript",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u4F7F\u7528-typescript","aria-hidden":"true"},"#"),l(" \u4F7F\u7528 TypeScript")],-1),b=s("p",null,"\u5982\u679C\u4F60\u4F7F\u7528 TypeScript \u8FDB\u884C\u5F00\u53D1\uFF0C\u4F60\u53EF\u80FD\u8FD8\u9700\u8981\u4E0B\u9762\u8FD9\u4E9B\u4F9D\u8D56 (\u5F53\u7136\u4F60\u53EF\u80FD\u5DF2\u7ECF\u5B89\u88C5\u4E86\u5B83\u4EEC)\uFF1A",-1),x=s("pre",{class:"shiki",style:{"background-color":"#032f62"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFFF00"}},"npm"),s("span",{style:{color:"#FFFFFF"}}," i typescript esbuild-register "),s("span",{style:{color:"#99FFFF"}},"@"),s("span",{style:{color:"#FFFFFF"}},"types/node "),s("span",{style:{color:"#99FFFF"}},"@"),s("span",{style:{color:"#FFFFFF"}},"types/mocha "),s("span",{style:{color:"#99FFFF"}},"@"),s("span",{style:{color:"#FFFFFF"}},"types/chai -D")])])],-1),w=s("pre",{class:"shiki",style:{"background-color":"#032f62"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFFF00"}},"yarn"),s("span",{style:{color:"#FFFFFF"}}," add typescript esbuild-register "),s("span",{style:{color:"#99FFFF"}},"@"),s("span",{style:{color:"#FFFFFF"}},"types/node "),s("span",{style:{color:"#99FFFF"}},"@"),s("span",{style:{color:"#FFFFFF"}},"types/mocha "),s("span",{style:{color:"#99FFFF"}},"@"),s("span",{style:{color:"#FFFFFF"}},"types/chai -D")])])],-1),j=s("p",null,[l("\u63A5\u7740\u7F16\u8F91\u4F60\u7684 "),s("code",null,".mocharc.js"),l(" \u6587\u4EF6\uFF1A")],-1),v=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"module"),s("span",{style:{color:"#F8F8F2"}},"."),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"exports"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  extension: ["),s("span",{style:{color:"#E6DB74"}},"'ts'"),s("span",{style:{color:"#F8F8F2"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  require: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#E6DB74"}},"'esbuild-register'"),s("span",{style:{color:"#F8F8F2"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")])])],-1),I=s("h2",{id:"\u6A21\u62DF\u4F1A\u8BDD\u6D88\u606F",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u6A21\u62DF\u4F1A\u8BDD\u6D88\u606F","aria-hidden":"true"},"#"),l(" \u6A21\u62DF\u4F1A\u8BDD\u6D88\u606F")],-1),N=s("p",null,[l("\u5BF9\u4E8E\u804A\u5929\u673A\u5668\u4EBA\u6765\u8BF4\u6700\u5E38\u89C1\u7684\u9700\u6C42\u662F\u5904\u7406\u7528\u6237\u7684\u6D88\u606F\u3002\u4E3A\u6B64\uFF0C\u6211\u4EEC\u63D0\u4F9B\u4E86 "),s("strong",null,"\u5BA2\u6237\u7AEF (Client)"),l(" \u5BF9\u8C61\uFF0C\u7528\u4E8E\u6A21\u62DF\u7279\u5B9A\u9891\u9053\u548C\u7528\u6237\u7684\u8F93\u5165\uFF1A")],-1),R=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { App } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," mock "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@koishijs/plugin-mock'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"const"),s("span",{style:{color:"#F8F8F2"}}," app "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"new"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"App"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"app."),s("span",{style:{color:"#A6E22E"}},"plugin"),s("span",{style:{color:"#F8F8F2"}},"(mock)")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// \u521B\u5EFA\u4E00\u4E2A userId \u4E3A 123 \u7684\u79C1\u804A\u5BA2\u6237\u7AEF")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"const"),s("span",{style:{color:"#F8F8F2"}}," client "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," app.mock."),s("span",{style:{color:"#A6E22E"}},"client"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'123'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// \u8FD9\u662F\u4E00\u4E2A\u7B80\u5355\u7684\u4E2D\u95F4\u4EF6\u4F8B\u5B50\uFF0C\u4E0B\u9762\u5C06\u6D4B\u8BD5\u8FD9\u4E2A\u4E2D\u95F4\u4EF6")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"app."),s("span",{style:{color:"#A6E22E"}},"middleware"),s("span",{style:{color:"#F8F8F2"}},"(({ "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"content"),s("span",{style:{color:"#F8F8F2"}}," }, "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"next"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"if"),s("span",{style:{color:"#F8F8F2"}}," (content "),s("span",{style:{color:"#F92672"}},"==="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'\u5929\u738B\u76D6\u5730\u864E'"),s("span",{style:{color:"#F8F8F2"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#F92672"}},"return"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'\u5B9D\u5854\u9547\u6CB3\u5996'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  } "),s("span",{style:{color:"#F92672"}},"else"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#F92672"}},"return"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"next"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// \u8FD9\u4E00\u53E5\u4E0D\u80FD\u5C11\uFF0C\u8981\u7B49\u5F85 app \u542F\u52A8\u5B8C\u6210")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6E22E"}},"before"),s("span",{style:{color:"#F8F8F2"}},"(() "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," app."),s("span",{style:{color:"#A6E22E"}},"start"),s("span",{style:{color:"#F8F8F2"}},"())")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6E22E"}},"it"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'example 1'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#F92672"}},"async"),s("span",{style:{color:"#F8F8F2"}}," () "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u5C06\u201C\u5929\u738B\u76D6\u5730\u864E\u201D\u53D1\u9001\u7ED9\u673A\u5668\u4EBA\u5C06\u4F1A\u83B7\u5F97\u201C\u5B9D\u5854\u9547\u6CB3\u5996\u201D\u7684\u56DE\u590D")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"await"),s("span",{style:{color:"#F8F8F2"}}," client."),s("span",{style:{color:"#A6E22E"}},"shouldReply"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'\u5929\u738B\u76D6\u5730\u864E'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E6DB74"}},"'\u5B9D\u5854\u9547\u6CB3\u5996'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u5C06\u201C\u5929\u738B\u76D6\u5730\u864E\u201D\u53D1\u9001\u7ED9\u673A\u5668\u4EBA\u5C06\u4F1A\u83B7\u5F97\u67D0\u4E9B\u56DE\u590D")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"await"),s("span",{style:{color:"#F8F8F2"}}," client."),s("span",{style:{color:"#A6E22E"}},"shouldReply"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'\u5929\u738B\u76D6\u5730\u864E'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u5C06\u201C\u5BAB\u5EF7\u7389\u6DB2\u9152\u201D\u53D1\u9001\u7ED9\u673A\u5668\u4EBA\u5C06\u4E0D\u4F1A\u83B7\u5F97\u4EFB\u4F55\u56DE\u590D")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"await"),s("span",{style:{color:"#F8F8F2"}}," client."),s("span",{style:{color:"#A6E22E"}},"shouldNotReply"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'\u5BAB\u5EF7\u7389\u6DB2\u9152'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")])])],-1),T=s("h2",{id:"\u6A21\u62DF\u6570\u636E\u5E93",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u6A21\u62DF\u6570\u636E\u5E93","aria-hidden":"true"},"#"),l(" \u6A21\u62DF\u6570\u636E\u5E93")],-1),C=s("p",null,"@koishijs/plugin-database-memory \u662F Koishi \u7684\u4E00\u4E2A\u57FA\u4E8E\u5185\u5B58\u7684\u6570\u636E\u5E93\u5B9E\u73B0\uFF0C\u975E\u5E38\u9002\u5408\u7528\u4E8E\u5355\u5143\u6D4B\u8BD5\u3002",-1),U=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { App } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," mock "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@koishijs/plugin-mock'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," memory "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@koishijs/plugin-database-memory'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"const"),s("span",{style:{color:"#F8F8F2"}}," app "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"new"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"App"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"app."),s("span",{style:{color:"#A6E22E"}},"plugin"),s("span",{style:{color:"#F8F8F2"}},"(mock)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"app."),s("span",{style:{color:"#A6E22E"}},"plugin"),s("span",{style:{color:"#F8F8F2"}},"(memory)")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// \u8FD9\u6B21\u6211\u4EEC\u6765\u6D4B\u8BD5\u4E00\u4E0B\u8FD9\u4E2A\u6307\u4EE4")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"app."),s("span",{style:{color:"#A6E22E"}},"command"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'foo'"),s("span",{style:{color:"#F8F8F2"}},", { authority: "),s("span",{style:{color:"#AE81FF"}},"2"),s("span",{style:{color:"#F8F8F2"}}," })."),s("span",{style:{color:"#A6E22E"}},"action"),s("span",{style:{color:"#F8F8F2"}},"(() "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'bar'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// \u521B\u5EFA\u4E24\u4E2A\u6765\u81EA\u4E0D\u540C\u7528\u6237\u7684\u5BA2\u6237\u7AEF\u5BF9\u8C61")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"const"),s("span",{style:{color:"#F8F8F2"}}," client1 "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," app.mock."),s("span",{style:{color:"#A6E22E"}},"client"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'123'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#66D9EF","font-style":"italic"}},"const"),s("span",{style:{color:"#F8F8F2"}}," client2 "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," app.mock."),s("span",{style:{color:"#A6E22E"}},"client"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'456'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6E22E"}},"before"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#F92672"}},"async"),s("span",{style:{color:"#F8F8F2"}}," () "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"await"),s("span",{style:{color:"#F8F8F2"}}," app."),s("span",{style:{color:"#A6E22E"}},"start"),s("span",{style:{color:"#F8F8F2"}},"()")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u5728\u6570\u636E\u5E93\u4E2D\u521D\u59CB\u5316\u4E24\u4E2A\u7528\u6237\uFF0CuserId \u5206\u522B\u4E3A 123 \u548C 456\uFF0C\u6743\u9650\u7B49\u7EA7\u5206\u522B\u4E3A 1 \u548C 2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// app.mock.initUser() \u65B9\u6CD5\u672C\u8D28\u4E0A\u53EA\u662F app.database.createUser() \u7684\u8BED\u6CD5\u7CD6")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"await"),s("span",{style:{color:"#F8F8F2"}}," app.mock."),s("span",{style:{color:"#A6E22E"}},"initUser"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'123'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#AE81FF"}},"1"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"await"),s("span",{style:{color:"#F8F8F2"}}," app.mock."),s("span",{style:{color:"#A6E22E"}},"initUser"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'456'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#AE81FF"}},"2"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6E22E"}},"it"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'example 2'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#F92672"}},"async"),s("span",{style:{color:"#F8F8F2"}}," () "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u7528\u6237 123 \u5C1D\u8BD5\u8C03\u7528 foo \u6307\u4EE4\uFF0C\u4F46\u662F\u6743\u9650\u4E0D\u8DB3")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"await"),s("span",{style:{color:"#F8F8F2"}}," client1."),s("span",{style:{color:"#A6E22E"}},"shouldReply"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'foo'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E6DB74"}},"'\u6743\u9650\u4E0D\u8DB3\u3002'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u7528\u6237 456 \u5F97\u4EE5\u6B63\u5E38\u8C03\u7528 foo \u6307\u4EE4")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"await"),s("span",{style:{color:"#F8F8F2"}}," client2."),s("span",{style:{color:"#A6E22E"}},"shouldReply"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'foo'"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#E6DB74"}},"'bar'"),s("span",{style:{color:"#F8F8F2"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"})")])])],-1);function V(S,K){const a=F("ExternalLinkIcon"),e=F("panel-view");return c(),p("div",null,[i,s("div",d,[h,s("p",null,[l("\u672C\u8282\u4E2D\u4ECB\u7ECD\u7684\u6837\u4F8B\u7528\u5230\u4E86 "),s("a",E,[l("Mocha"),o(a)]),l(" \u548C "),s("a",u,[l("Chai"),o(a)]),l("\u3002\u5B83\u4EEC\u90FD\u662F\u6BD4\u8F83\u901A\u7528\u7684\u6D4B\u8BD5\u5E93\u548C\u65AD\u8A00\u5E93\uFF0C\u4F46\u5E76\u975E\u7ED1\u5B9A @koishijs/plugin-mock \u4E00\u540C\u4F7F\u7528\u3002\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u4F60\u7684\u559C\u597D\u9009\u62E9\u5176\u4ED6\u5DE5\u5177\uFF0C\u6BD4\u5982 "),s("a",_,[l("Jest"),o(a)]),l(" \u7B49\u7B49\u3002")])]),m,f,o(e,{class:"code",type:"manager",title:""},{npm:n(()=>[k]),yarn:n(()=>[D]),_:1}),A,o(e,{class:"code",title:"tests/index.spec.js no-extra-header",style:{}},{default:n(()=>[g]),_:1}),B,b,o(e,{class:"code",type:"manager",title:""},{npm:n(()=>[x]),yarn:n(()=>[w]),_:1}),j,o(e,{class:"code",title:".mocharc.js",style:{}},{default:n(()=>[v]),_:1}),I,N,o(e,{class:"code",title:"",style:{}},{default:n(()=>[R]),_:1}),T,C,o(e,{class:"code",title:"",style:{}},{default:n(()=>[U]),_:1})])}const q=t(y,[["render",V],["__file","unit-tests.html.vue"]]);export{q as default};
