import{_ as c,r as a,o as r,c as p,d as o,w as n,a as s,b as l}from"./app.d641dd0e.js";const y={},i=s("h1",{id:"\u7F16\u5199\u6570\u636E\u5E93\u63D2\u4EF6",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u7F16\u5199\u6570\u636E\u5E93\u63D2\u4EF6","aria-hidden":"true"},"#"),l(" \u7F16\u5199\u6570\u636E\u5E93\u63D2\u4EF6")],-1),d=s("p",null,"\u73B0\u5728\u8BA9\u6211\u4EEC\u4ECB\u7ECD\u4E00\u4E0B\u5982\u4F55\u7F16\u5199\u4E00\u4E2A\u6570\u636E\u5E93\u652F\u6301\u3002\u4E0E\u4E0A\u9762\u4ECB\u7ECD\u7684\u65B9\u6CD5\u7C7B\u4F3C\uFF0C\u6211\u4EEC\u4E5F\u91C7\u7528\u6CE8\u5165\u7684\u65B9\u5F0F\uFF0C\u4E0D\u8FC7\u8FD9\u6B21\u6211\u4EEC\u9700\u8981\u5148\u5B9E\u73B0\u4E00\u4E2A\u7C7B\u3002\u6211\u4EEC\u7528 mysql \u6765\u4E3E\u4E2A\u4F8B\u5B50\uFF1A",-1),E=s("p",null,"\u7531\u4E8E\u6570\u636E\u5E93\u652F\u6301\u5F80\u5F80\u8981\u88AB\u5176\u4ED6\u63D2\u4EF6\u6216\u7528\u6237\u6240\u4F7F\u7528\uFF0C\u6709\u4E00\u4E2A\u597D\u7684\u7C7B\u578B\u6807\u6CE8\u662F\u975E\u5E38\u91CD\u8981\u7684\u3002\u56E0\u6B64\u8FD9\u91CC\u6211\u4EEC\u5C31\u53EA\u63D0\u4F9B TypeScript \u7684\u8303\u4F8B\u4E86\u3002",-1),u=s("h2",{id:"\u4EE3\u7801\u793A\u4F8B",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u4EE3\u7801\u793A\u4F8B","aria-hidden":"true"},"#"),l(" \u4EE3\u7801\u793A\u4F8B")],-1),f=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { createPool, Pool, PoolConfig } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'mysql'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { Context, Database } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// \u4ECE Database \u7C7B\u6D3E\u751F\u51FA\u4E00\u4E2A\u5B50\u7C7B\u5E76\u5C06\u5176\u9ED8\u8BA4\u5BFC\u51FA")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"default"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"MysqlDatabase"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"extends"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","font-style":"italic","text-decoration":"underline"}},"Database"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"private"),s("span",{style:{color:"#F8F8F2"}}," pool"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Pool")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"constructor"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"ctx"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Context"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"config"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"PoolConfig"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," {}) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#FD971F"}},"super"),s("span",{style:{color:"#F8F8F2"}},"(ctx)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#FD971F"}},"this"),s("span",{style:{color:"#F8F8F2"}},".pool "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E"}},"createPool"),s("span",{style:{color:"#F8F8F2"}},"(config)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"query"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"sql"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"string"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"values"),s("span",{style:{color:"#F92672"}},"?:"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"any"),s("span",{style:{color:"#F8F8F2"}},")"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Promise"),s("span",{style:{color:"#F8F8F2"}},"<"),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"any"),s("span",{style:{color:"#F8F8F2"}},"> {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    "),s("span",{style:{color:"#F92672"}},"return"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"new"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"Promise"),s("span",{style:{color:"#F8F8F2"}},"(("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"resolve"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"reject"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      "),s("span",{style:{color:"#FD971F"}},"this"),s("span",{style:{color:"#F8F8F2"}},".pool."),s("span",{style:{color:"#A6E22E"}},"query"),s("span",{style:{color:"#F8F8F2"}},"(sql, values, ("),s("span",{style:{color:"#FD971F","font-style":"italic"}},"error"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"results"),s("span",{style:{color:"#F8F8F2"}},", "),s("span",{style:{color:"#FD971F","font-style":"italic"}},"fields"),s("span",{style:{color:"#F8F8F2"}},") "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"=>"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        "),s("span",{style:{color:"#F92672"}},"if"),s("span",{style:{color:"#F8F8F2"}}," (error) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          "),s("span",{style:{color:"#A6E22E"}},"reject"),s("span",{style:{color:"#F8F8F2"}},"(error)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        } "),s("span",{style:{color:"#F92672"}},"else"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"          "),s("span",{style:{color:"#A6E22E"}},"resolve"),s("span",{style:{color:"#F8F8F2"}},"(results)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"        }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"      })")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    })")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#88846F"}},"// \u5B9E\u73B0\u5185\u7F6E\u65B9\u6CD5")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"get"),s("span",{style:{color:"#F8F8F2"}},"() {}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"set"),s("span",{style:{color:"#F8F8F2"}},"() {}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"upsert"),s("span",{style:{color:"#F8F8F2"}},"() {}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"remove"),s("span",{style:{color:"#F8F8F2"}},"() {}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"create"),s("span",{style:{color:"#F8F8F2"}},"() {}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"drop"),s("span",{style:{color:"#F8F8F2"}},"() {}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"eval"),s("span",{style:{color:"#F8F8F2"}},"() {}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#A6E22E"}},"stats"),s("span",{style:{color:"#F8F8F2"}},"() {}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")])])],-1),h={href:"https://github.com/koishijs/koishi/tree/master/plugins/database/mysql",target:"_blank",rel:"noopener noreferrer"},_=s("h2",{id:"\u8C03\u7528\u539F\u59CB\u63A5\u53E3",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#\u8C03\u7528\u539F\u59CB\u63A5\u53E3","aria-hidden":"true"},"#"),l(" \u8C03\u7528\u539F\u59CB\u63A5\u53E3")],-1),D=s("div",{class:"custom-container danger"},[s("p",{class:"custom-container-title"},"DANGER"),s("p",null,"\u867D\u7136 Koishi \u63D0\u4F9B\u4E86\u8FD9\u79CD\u65B9\u6848\uFF0C\u4F46\u5FC5\u987B\u8BF4\u660E\u7684\u662F\u6211\u4EEC\u4E0D\u63A8\u8350\u8FD9\u79CD\u884C\u4E3A\u3002\u8FD9\u6837\u505A\u4F1A\u4F7F\u4F60\u7684\u4EE3\u7801\u7684\u8026\u5408\u5EA6\u589E\u52A0\uFF0C\u5E76\u4E14\u96BE\u4EE5\u88AB\u5176\u4ED6\u4EBA\u4F7F\u7528\u3002")],-1),m=s("p",null,"\u5982\u679C\u7528\u6237\u9700\u8981\u8C03\u7528\u539F\u59CB\u7684\u6570\u636E\u5E93\u63A5\u53E3\u800C\u4E0D\u662F\u4F7F\u7528 ORM\uFF0C\u4ED6\u53EF\u4EE5\u5229\u7528 Database \u5BF9\u8C61\u7684\u7279\u6B8A\u5C5E\u6027\uFF0C\u5B83\u53EA\u5728\u4F7F\u7528\u4E86\u7279\u5B9A\u7684\u6570\u636E\u5E93\u63D2\u4EF6\u7684\u65F6\u5019\u6709\u6548\uFF1A",-1),x=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// TypeScript \u7528\u6237\u9700\u8981\u624B\u52A8\u5F15\u5165\u6A21\u5757\uFF0C\u5426\u5219\u5C06\u4EA7\u751F\u7C7B\u578B\u9519\u8BEF")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," {} "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'@koishijs/plugin-database-mysql'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// \u76F4\u63A5\u53D1\u9001 SQL \u8BED\u53E5")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"ctx.database.mysql."),s("span",{style:{color:"#A6E22E"}},"query"),s("span",{style:{color:"#F8F8F2"}},"("),s("span",{style:{color:"#E6DB74"}},"'select * from user'"),s("span",{style:{color:"#F8F8F2"}},")")])])],-1),b=s("p",null,[l("\u5BF9\u4E8E\u5176\u4ED6\u6570\u636E\u5E93\u5B9E\u73B0\u7C7B\u4F3C\uFF0C\u4F8B\u5982 mongo \u7684\u539F\u59CB\u63A5\u53E3\u53EF\u4EE5\u901A\u8FC7 "),s("code",null,"ctx.database.mongo"),l(" \u8BBF\u95EE\u5230\u3002\u4E3A\u4E86\u5B9E\u73B0\u8FD9\u4E00\u70B9\uFF0C\u6570\u636E\u5E93\u63D2\u4EF6\u7684\u5F00\u53D1\u8005\u9700\u8981\u5728\u4E0A\u9762\u7684\u793A\u4F8B\u4EE3\u7801\u4E2D\u6DFB\u52A0\u4E0B\u9762\u51E0\u884C\uFF1A")],-1),A=s("pre",{class:"shiki",style:{"background-color":"#272822"}},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"import"),s("span",{style:{color:"#F8F8F2"}}," { Database } "),s("span",{style:{color:"#F92672"}},"from"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// \u6B65\u9AA4 1: \u6CE8\u5165\u5C5E\u6027")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"declare"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"module"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#E6DB74"}},"'koishi'"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"interface"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"Database"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"    mysql"),s("span",{style:{color:"#F92672"}},":"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"MysqlDatabase")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#88846F"}},"// \u6B65\u9AA4 2: \u5B9E\u73B0\u6B64\u5C5E\u6027")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F92672"}},"export"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"default"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#66D9EF","font-style":"italic"}},"class"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","text-decoration":"underline"}},"MysqlDatabase"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#F92672"}},"extends"),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#A6E22E","font-style":"italic","text-decoration":"underline"}},"Database"),s("span",{style:{color:"#F8F8F2"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"  "),s("span",{style:{color:"#F92672"}},"public"),s("span",{style:{color:"#F8F8F2"}}," mysql "),s("span",{style:{color:"#F92672"}},"="),s("span",{style:{color:"#F8F8F2"}}," "),s("span",{style:{color:"#FD971F"}},"this")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F8F8F2"}},"}")])])],-1);function g(k,q){const e=a("panel-view"),t=a("RouterLink"),F=a("ExternalLinkIcon");return r(),p("div",null,[i,d,E,u,o(e,{class:"code",title:"",style:{}},{default:n(()=>[f]),_:1}),s("p",null,[l("\u5F53\u7136\uFF0C\u771F\u6B63\u7684 "),o(t,{to:"/plugins/database/mysql.html"},{default:n(()=>[l("@koishijs/plugin-database-mysql")]),_:1}),l(" \u8981\u6BD4\u4E0A\u9762\u7684\u4F8B\u5B50\u590D\u6742\u7684\u591A\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u5904\u7406\u6709\u5173\u6570\u636E\u5E93\u7684\u66F4\u591A\u7EC6\u8282\u3002\u4F60\u53EF\u4EE5\u5728 "),s("a",h,[l("\u8FD9\u91CC"),o(F)]),l(" \u770B\u5230\u5B8C\u6574\u7684\u6E90\u4EE3\u7801\u3002")]),_,D,m,o(e,{class:"code",title:"",style:{}},{default:n(()=>[x]),_:1}),b,o(e,{class:"code",title:"",style:{}},{default:n(()=>[A]),_:1})])}const B=c(y,[["render",g],["__file","writing.html.vue"]]);export{B as default};
